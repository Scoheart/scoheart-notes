<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>UMD æ¨¡å—åŒ–ç¤ºä¾‹ - æµè§ˆå™¨å…¨å±€å˜é‡</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 800px;
      margin: 50px auto;
      padding: 20px;
      background-color: #f5f5f5;
    }
    .container {
      background: white;
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    h1 {
      color: #333;
      border-bottom: 3px solid #9C27B0;
      padding-bottom: 10px;
    }
    .section {
      margin: 20px 0;
      padding: 15px;
      background: #f9f9f9;
      border-left: 4px solid #9C27B0;
    }
    .result {
      background: #f3e5f5;
      padding: 10px;
      margin: 10px 0;
      border-radius: 4px;
      font-family: monospace;
    }
    code {
      background: #f4f4f4;
      padding: 2px 6px;
      border-radius: 3px;
      font-family: 'Courier New', monospace;
    }
    .env-badge {
      display: inline-block;
      background: #9C27B0;
      color: white;
      padding: 5px 15px;
      border-radius: 20px;
      font-weight: bold;
      margin: 10px 0;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ¯ UMD æ¨¡å—åŒ–ç¤ºä¾‹</h1>
    <div class="env-badge">æµè§ˆå™¨å…¨å±€å˜é‡ç¯å¢ƒ</div>

    <div class="section">
      <h2>ğŸ“ è¯´æ˜</h2>
      <p>æœ¬ç¤ºä¾‹å±•ç¤ºäº† UMD æ¨¡å—åœ¨æµè§ˆå™¨ç¯å¢ƒä¸‹ä½œä¸º<strong>å…¨å±€å˜é‡</strong>ä½¿ç”¨çš„æ–¹å¼ã€‚</p>
      <p>æ¨¡å—è¢«æŒ‚è½½åˆ° <code>window.Calculator</code> å’Œ <code>window.Logger</code>ã€‚</p>
      <p>æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°æŸ¥çœ‹è¯¦ç»†è¾“å‡ºã€‚</p>
    </div>

    <div class="section">
      <h2>ğŸ§® è®¡ç®—å™¨æ¨¡å—æµ‹è¯•</h2>
      <div id="calculator-results"></div>
    </div>

    <div class="section">
      <h2>ğŸ“Š æ—¥å¿—æ¨¡å—æµ‹è¯•</h2>
      <div id="logger-results"></div>
    </div>

    <div class="section">
      <h2>ğŸ’¡ UMD å…³é”®ç‰¹ç‚¹</h2>
      <ul>
        <li>âœ… æ”¯æŒ AMD (RequireJS)</li>
        <li>âœ… æ”¯æŒ CommonJS (Node.js)</li>
        <li>âœ… æ”¯æŒæµè§ˆå™¨å…¨å±€å˜é‡ <strong>(å½“å‰ç¯å¢ƒ)</strong></li>
        <li>âœ… ä¸€ä»½ä»£ç ï¼Œå¤šç¯å¢ƒè¿è¡Œ</li>
        <li>âœ… é€‚åˆå¼€å‘è·¨å¹³å°çš„ JavaScript åº“</li>
      </ul>
    </div>

    <div class="section">
      <h2>ğŸ” ç¯å¢ƒæ£€æµ‹é€»è¾‘</h2>
      <pre><code>// UMD æ¨¡å¼
(function (root, factory) {
  if (typeof define === 'function' && define.amd) {
    // AMD ç¯å¢ƒ
    define([], factory);
  } else if (typeof module === 'object' && module.exports) {
    // CommonJS ç¯å¢ƒ
    module.exports = factory();
  } else {
    // æµè§ˆå™¨å…¨å±€å˜é‡ â† å½“å‰ä½¿ç”¨æ­¤æ–¹å¼
    root.Calculator = factory();
  }
}(typeof self !== 'undefined' ? self : this, function () {
  // æ¨¡å—ä»£ç 
}));</code></pre>
    </div>
  </div>

  <!-- ç›´æ¥åŠ è½½ UMD æ¨¡å—ï¼Œä¼šè‡ªåŠ¨æŒ‚è½½åˆ°å…¨å±€ -->
  <script src="calculator.js"></script>
  <script src="logger.js"></script>

  <script>
    console.log('========================================');
    console.log('UMD æ¨¡å—åŒ–ç¤ºä¾‹ - æµè§ˆå™¨å…¨å±€å˜é‡ç¯å¢ƒ');
    console.log('========================================\n');

    // ç›´æ¥ä½¿ç”¨å…¨å±€å˜é‡
    console.log('ğŸ“¦ æ¨¡å—åŠ è½½å®Œæˆ (å…¨å±€å˜é‡æ–¹å¼)');
    console.log('âœ… window.Calculator:', typeof Calculator);
    console.log('âœ… window.Logger:', typeof Logger);
    console.log('');

    // ==================== æµ‹è¯•æ—¥å¿—æ¨¡å— ====================
    console.log('ğŸ“Š æµ‹è¯•æ—¥å¿—æ¨¡å—:');
    Logger.info('åº”ç”¨å¯åŠ¨ (æµè§ˆå™¨ç¯å¢ƒ)');
    Logger.warn('è¿™æ˜¯ä¸€ä¸ªè­¦å‘Šä¿¡æ¯');
    Logger.error('è¿™æ˜¯ä¸€ä¸ªé”™è¯¯ä¿¡æ¯');
    Logger.debug('è¿™æ˜¯ä¸€ä¸ªè°ƒè¯•ä¿¡æ¯');
    console.log('æ—¥å¿—æ€»æ•°:', Logger.getLogCount());
    console.log('');

    // ==================== æµ‹è¯•è®¡ç®—å™¨æ¨¡å— ====================
    console.log('ğŸ§® æµ‹è¯•è®¡ç®—å™¨æ¨¡å—:');
    Logger.info('å¼€å§‹è®¡ç®—å™¨æµ‹è¯•');

    const result1 = Calculator.add(10, 5);
    console.log('10 + 5 =', result1);
    Logger.info('åŠ æ³•è¿ç®—: 10 + 5 = ' + result1);

    const result2 = Calculator.subtract(20, 8);
    console.log('20 - 8 =', result2);
    Logger.info('å‡æ³•è¿ç®—: 20 - 8 = ' + result2);

    const result3 = Calculator.multiply(6, 7);
    console.log('6 * 7 =', result3);
    Logger.info('ä¹˜æ³•è¿ç®—: 6 * 7 = ' + result3);

    const result4 = Calculator.divide(100, 4);
    console.log('100 / 4 =', result4);
    Logger.info('é™¤æ³•è¿ç®—: 100 / 4 = ' + result4);

    const result5 = Calculator.power(2, 10);
    console.log('2 ^ 10 =', result5);
    Logger.info('å¹‚è¿ç®—: 2 ^ 10 = ' + result5);

    const result6 = Calculator.sqrt(16);
    console.log('âˆš16 =', result6);
    Logger.info('å¹³æ–¹æ ¹: âˆš16 = ' + result6);

    const result7 = Calculator.mod(17, 5);
    console.log('17 % 5 =', result7);
    Logger.info('å–æ¨¡è¿ç®—: 17 % 5 = ' + result7);

    console.log('');
    console.log('ğŸ“œ è®¡ç®—å™¨ç‰ˆæœ¬:', Calculator.getVersion());
    console.log('ğŸ“œ è®¡ç®—å†å²:');
    console.table(Calculator.getHistory());

    // ==================== æµ‹è¯•é”™è¯¯å¤„ç† ====================
    console.log('âš ï¸ æµ‹è¯•é”™è¯¯å¤„ç†:');
    try {
      Calculator.divide(10, 0);
    } catch (e) {
      console.error('æ•è·åˆ°é”™è¯¯:', e.message);
      Logger.error('é™¤é›¶é”™è¯¯: ' + e.message);
    }

    try {
      Calculator.sqrt(-1);
    } catch (e) {
      console.error('æ•è·åˆ°é”™è¯¯:', e.message);
      Logger.error('è´Ÿæ•°å¼€æ–¹é”™è¯¯: ' + e.message);
    }

    // ==================== æŸ¥çœ‹æ‰€æœ‰æ—¥å¿— ====================
    console.log('');
    console.log('ğŸ“Š æ‰€æœ‰æ—¥å¿—è®°å½•:');
    console.table(Logger.getLogs());

    console.log('');
    console.log('ğŸ“ˆ æ—¥å¿—ç»Ÿè®¡:');
    console.log('  - INFO: ', Logger.getLogsByLevel(Logger.LogLevel.INFO).length, 'æ¡');
    console.log('  - WARN: ', Logger.getLogsByLevel(Logger.LogLevel.WARN).length, 'æ¡');
    console.log('  - ERROR:', Logger.getLogsByLevel(Logger.LogLevel.ERROR).length, 'æ¡');
    console.log('  - DEBUG:', Logger.getLogsByLevel(Logger.LogLevel.DEBUG).length, 'æ¡');

    // ==================== UMD ç‰¹æ€§è¯´æ˜ ====================
    console.log('');
    console.log('ğŸ’¡ UMD ç‰¹æ€§:');
    console.log('  âœ… å½“å‰ç¯å¢ƒ: æµè§ˆå™¨å…¨å±€å˜é‡');
    console.log('  âœ… åŒä¸€ä»½ä»£ç å¯ä»¥åœ¨å¤šç§ç¯å¢ƒè¿è¡Œ');
    console.log('  âœ… è‡ªåŠ¨æ£€æµ‹å¹¶é€‚é…å½“å‰ç¯å¢ƒ');
    console.log('  âœ… æ¨¡å—æŒ‚è½½åˆ° window å¯¹è±¡');

    // ==================== æ›´æ–°é¡µé¢æ˜¾ç¤º ====================
    document.getElementById('calculator-results').innerHTML = `
      <div class="result">åŠ æ³•: 10 + 5 = ${result1}</div>
      <div class="result">å‡æ³•: 20 - 8 = ${result2}</div>
      <div class="result">ä¹˜æ³•: 6 * 7 = ${result3}</div>
      <div class="result">é™¤æ³•: 100 / 4 = ${result4}</div>
      <div class="result">å¹‚è¿ç®—: 2 ^ 10 = ${result5}</div>
      <div class="result">å¹³æ–¹æ ¹: âˆš16 = ${result6}</div>
      <div class="result">å–æ¨¡: 17 % 5 = ${result7}</div>
      <div class="result">ç‰ˆæœ¬: ${Calculator.getVersion()}</div>
    `;

    document.getElementById('logger-results').innerHTML = `
      <div class="result">æ—¥å¿—æ€»æ•°: ${Logger.getLogCount()}</div>
      <div class="result">INFO æ—¥å¿—æ•°: ${Logger.getLogsByLevel(Logger.LogLevel.INFO).length}</div>
      <div class="result">WARN æ—¥å¿—æ•°: ${Logger.getLogsByLevel(Logger.LogLevel.WARN).length}</div>
      <div class="result">ERROR æ—¥å¿—æ•°: ${Logger.getLogsByLevel(Logger.LogLevel.ERROR).length}</div>
      <div class="result">DEBUG æ—¥å¿—æ•°: ${Logger.getLogsByLevel(Logger.LogLevel.DEBUG).length}</div>
    `;

    console.log('');
    console.log('========================================');
    console.log('âœ… UMD æ¨¡å—åŒ–ç¤ºä¾‹å®Œæˆ (æµè§ˆå™¨ç¯å¢ƒ)');
    console.log('========================================');
  </script>
</body>
</html>
