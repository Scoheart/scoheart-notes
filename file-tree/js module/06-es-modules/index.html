<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ES Modules æ¨¡å—åŒ–ç¤ºä¾‹</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 900px;
      margin: 50px auto;
      padding: 20px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }
    .container {
      background: white;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.2);
    }
    h1 {
      color: #333;
      border-bottom: 4px solid #667eea;
      padding-bottom: 10px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    .section {
      margin: 20px 0;
      padding: 20px;
      background: #f9f9f9;
      border-left: 4px solid #667eea;
      border-radius: 4px;
    }
    .result {
      background: linear-gradient(135deg, #667eea15 0%, #764ba215 100%);
      padding: 12px;
      margin: 10px 0;
      border-radius: 6px;
      font-family: 'Monaco', 'Menlo', monospace;
      border-left: 3px solid #667eea;
    }
    code {
      background: #f4f4f4;
      padding: 3px 8px;
      border-radius: 4px;
      font-family: 'Courier New', monospace;
      color: #667eea;
      font-weight: bold;
    }
    .badge {
      display: inline-block;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 6px 16px;
      border-radius: 20px;
      font-weight: bold;
      margin: 10px 0;
      font-size: 14px;
    }
    .feature-list {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 15px;
      margin: 15px 0;
    }
    .feature-item {
      background: white;
      padding: 15px;
      border-radius: 8px;
      border: 2px solid #667eea;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 15px 0;
    }
    th, td {
      padding: 12px;
      text-align: left;
      border-bottom: 1px solid #ddd;
    }
    th {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      font-weight: bold;
    }
    tr:hover {
      background: #f5f5f5;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸš€ ES Modules (ESM) æ¨¡å—åŒ–ç¤ºä¾‹</h1>
    <div class="badge">JavaScript å®˜æ–¹æ ‡å‡† Â· ES6+</div>

    <div class="section">
      <h2>ğŸ“ è¯´æ˜</h2>
      <p>æœ¬ç¤ºä¾‹å±•ç¤ºäº† <strong>ES Modules (ESM)</strong> çš„ä½¿ç”¨æ–¹å¼ï¼Œè¿™æ˜¯ JavaScript çš„å®˜æ–¹æ ‡å‡†æ¨¡å—ç³»ç»Ÿã€‚</p>
      <p>ä½¿ç”¨ <code>&lt;script type="module"&gt;</code> åŠ è½½æ¨¡å—ã€‚</p>
      <p>æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°æŸ¥çœ‹è¯¦ç»†è¾“å‡ºã€‚</p>
    </div>

    <div class="section">
      <h2>ğŸ§® è®¡ç®—å™¨æ¨¡å—æµ‹è¯•</h2>
      <div id="calculator-results"></div>
    </div>

    <div class="section">
      <h2>ğŸ“Š æ—¥å¿—æ¨¡å—æµ‹è¯•</h2>
      <div id="logger-results"></div>
    </div>

    <div class="section">
      <h2>ğŸ”§ å·¥å…·æ¨¡å—æµ‹è¯•</h2>
      <div id="utils-results"></div>
    </div>

    <div class="section">
      <h2>ğŸ’¡ ES Modules å…³é”®ç‰¹ç‚¹</h2>
      <div class="feature-list">
        <div class="feature-item">
          <strong>âœ… å®˜æ–¹æ ‡å‡†</strong>
          <p>JavaScript è¯­è¨€åŸç”Ÿæ”¯æŒ</p>
        </div>
        <div class="feature-item">
          <strong>âœ… é™æ€åˆ†æ</strong>
          <p>ç¼–è¯‘æ—¶ç¡®å®šä¾èµ–å…³ç³»</p>
        </div>
        <div class="feature-item">
          <strong>âœ… Tree-shaking</strong>
          <p>æ”¯æŒæ‘‡æ ‘ä¼˜åŒ–ï¼Œå‡å°ä½“ç§¯</p>
        </div>
        <div class="feature-item">
          <strong>âœ… å¼‚æ­¥åŠ è½½</strong>
          <p>ä¸é˜»å¡é¡µé¢æ¸²æŸ“</p>
        </div>
        <div class="feature-item">
          <strong>âœ… è¯­æ³•ç®€æ´</strong>
          <p>import/export ç›´è§‚æ˜“ç”¨</p>
        </div>
        <div class="feature-item">
          <strong>âœ… å¹¿æ³›æ”¯æŒ</strong>
          <p>ç°ä»£æµè§ˆå™¨å’Œ Node.js</p>
        </div>
      </div>
    </div>

    <div class="section">
      <h2>ğŸ”„ å¤šç§å¯¼å…¥å¯¼å‡ºæ–¹å¼</h2>
      <h3>å¯¼å‡ºæ–¹å¼:</h3>
      <table>
        <thead>
          <tr>
            <th>ç±»å‹</th>
            <th>è¯­æ³•ç¤ºä¾‹</th>
            <th>è¯´æ˜</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>å‘½åå¯¼å‡º</td>
            <td><code>export const x = 1;</code></td>
            <td>å¯ä»¥å¯¼å‡ºå¤šä¸ª</td>
          </tr>
          <tr>
            <td>é»˜è®¤å¯¼å‡º</td>
            <td><code>export default MyClass;</code></td>
            <td>æ¯ä¸ªæ¨¡å—åªèƒ½æœ‰ä¸€ä¸ª</td>
          </tr>
          <tr>
            <td>èšåˆå¯¼å‡º</td>
            <td><code>export * from './mod.js';</code></td>
            <td>é‡æ–°å¯¼å‡ºå…¶ä»–æ¨¡å—</td>
          </tr>
        </tbody>
      </table>

      <h3>å¯¼å…¥æ–¹å¼:</h3>
      <table>
        <thead>
          <tr>
            <th>ç±»å‹</th>
            <th>è¯­æ³•ç¤ºä¾‹</th>
            <th>è¯´æ˜</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>å‘½åå¯¼å…¥</td>
            <td><code>import { x } from './mod.js';</code></td>
            <td>å¯¼å…¥ç‰¹å®šçš„å‘½åå¯¼å‡º</td>
          </tr>
          <tr>
            <td>é»˜è®¤å¯¼å…¥</td>
            <td><code>import Mod from './mod.js';</code></td>
            <td>å¯¼å…¥é»˜è®¤å¯¼å‡º</td>
          </tr>
          <tr>
            <td>å‘½åç©ºé—´å¯¼å…¥</td>
            <td><code>import * as Mod from './mod.js';</code></td>
            <td>å¯¼å…¥æ‰€æœ‰å‘½åå¯¼å‡º</td>
          </tr>
          <tr>
            <td>æ··åˆå¯¼å…¥</td>
            <td><code>import Mod, { x } from './mod.js';</code></td>
            <td>åŒæ—¶å¯¼å…¥é»˜è®¤å’Œå‘½å</td>
          </tr>
          <tr>
            <td>åŠ¨æ€å¯¼å…¥</td>
            <td><code>await import('./mod.js');</code></td>
            <td>è¿è¡Œæ—¶å¼‚æ­¥åŠ è½½</td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="section">
      <h2>ğŸ†š ES Modules vs å…¶ä»–è§„èŒƒ</h2>
      <table>
        <thead>
          <tr>
            <th>ç‰¹æ€§</th>
            <th>ES Modules</th>
            <th>CommonJS</th>
            <th>AMD/CMD</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>æ ‡å‡†åŒ–</td>
            <td>âœ… å®˜æ–¹æ ‡å‡†</td>
            <td>âŒ ç¤¾åŒºè§„èŒƒ</td>
            <td>âŒ ç¤¾åŒºè§„èŒƒ</td>
          </tr>
          <tr>
            <td>é™æ€åˆ†æ</td>
            <td>âœ… æ”¯æŒ</td>
            <td>âŒ ä¸æ”¯æŒ</td>
            <td>éƒ¨åˆ†æ”¯æŒ</td>
          </tr>
          <tr>
            <td>Tree-shaking</td>
            <td>âœ… æ”¯æŒ</td>
            <td>âŒ ä¸æ”¯æŒ</td>
            <td>âŒ ä¸æ”¯æŒ</td>
          </tr>
          <tr>
            <td>æµè§ˆå™¨åŸç”Ÿ</td>
            <td>âœ… æ”¯æŒ</td>
            <td>âŒ éœ€è¦æ‰“åŒ…</td>
            <td>éœ€è¦åŠ è½½å™¨</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!--
    é‡è¦ï¼štype="module" å±æ€§å‘Šè¯‰æµè§ˆå™¨è¿™æ˜¯ ES Module
    ES Modules é»˜è®¤ä½¿ç”¨ä¸¥æ ¼æ¨¡å¼
    ES Modules é»˜è®¤å»¶è¿Ÿæ‰§è¡Œï¼ˆdeferï¼‰
  -->
  <script type="module">
    // å¯¼å…¥æ¨¡å—ï¼ˆæ³¨æ„ï¼šå¿…é¡»åŒ…å« .js æ‰©å±•åï¼‰
    import Calculator from './calculator.js';
    import Logger, { info, warn, error, LogLevel } from './logger.js';
    import * as Utils from './utils.js';

    console.log('========================================');
    console.log('ES Modules æ¨¡å—åŒ–ç¤ºä¾‹ - æµè§ˆå™¨ç¯å¢ƒ');
    console.log('========================================\n');

    console.log('ğŸ“¦ æ¨¡å—åŠ è½½å®Œæˆ (ES Modules æ–¹å¼)\n');

    // ==================== æµ‹è¯•æ—¥å¿—æ¨¡å— ====================
    console.log('ğŸ“Š æµ‹è¯•æ—¥å¿—æ¨¡å—:');
    info('åº”ç”¨å¯åŠ¨ (æµè§ˆå™¨ç¯å¢ƒ)');
    warn('è¿™æ˜¯ä¸€ä¸ªè­¦å‘Šä¿¡æ¯');
    error('è¿™æ˜¯ä¸€ä¸ªé”™è¯¯ä¿¡æ¯');
    Logger.debug('è¿™æ˜¯ä¸€ä¸ªè°ƒè¯•ä¿¡æ¯');
    console.log('æ—¥å¿—æ€»æ•°:', Logger.getLogCount());
    console.log('');

    // ==================== æµ‹è¯•è®¡ç®—å™¨æ¨¡å— ====================
    console.log('ğŸ§® æµ‹è¯•è®¡ç®—å™¨æ¨¡å—:');
    info('å¼€å§‹è®¡ç®—å™¨æµ‹è¯•');

    const result1 = Calculator.add(10, 5);
    console.log('10 + 5 =', result1);

    const result2 = Calculator.multiply(6, 7);
    console.log('6 * 7 =', result2);

    const result3 = Calculator.divide(100, 4);
    console.log('100 / 4 =', result3);

    const result4 = Calculator.power(2, 10);
    console.log('2 ^ 10 =', result4);

    const result5 = Calculator.sqrt(16);
    console.log('âˆš16 =', result5);

    const result6 = Calculator.mod(17, 5);
    console.log('17 % 5 =', result6);

    console.log('');
    console.log('ğŸ“œ è®¡ç®—å†å²:');
    console.table(Calculator.getHistory());

    // ==================== æµ‹è¯•å·¥å…·æ¨¡å— ====================
    console.log('ğŸ”§ æµ‹è¯•å·¥å…·æ¨¡å—:');
    const utilResults = {
      pi: Utils.PI,
      e: Utils.E,
      formatted: Utils.formatNumber(Utils.PI, 4),
      clamped: Utils.clamp(9999, 0, 100),
      random: Utils.randomInt(1, 100),
      sum: Utils.MathUtils.sum(1, 2, 3, 4, 5)
    };
    console.table(utilResults);

    // ==================== æ›´æ–°é¡µé¢æ˜¾ç¤º ====================
    document.getElementById('calculator-results').innerHTML = `
      <div class="result">10 + 5 = ${result1}</div>
      <div class="result">6 * 7 = ${result2}</div>
      <div class="result">100 / 4 = ${result3}</div>
      <div class="result">2 ^ 10 = ${result4}</div>
      <div class="result">âˆš16 = ${result5}</div>
      <div class="result">17 % 5 = ${result6}</div>
    `;

    document.getElementById('logger-results').innerHTML = `
      <div class="result">æ—¥å¿—æ€»æ•°: ${Logger.getLogCount()}</div>
      <div class="result">INFO: ${Logger.getLogsByLevel(LogLevel.INFO).length} æ¡</div>
      <div class="result">WARN: ${Logger.getLogsByLevel(LogLevel.WARN).length} æ¡</div>
      <div class="result">ERROR: ${Logger.getLogsByLevel(LogLevel.ERROR).length} æ¡</div>
    `;

    document.getElementById('utils-results').innerHTML = `
      <div class="result">Ï€ = ${utilResults.pi}</div>
      <div class="result">e = ${utilResults.e}</div>
      <div class="result">æ ¼å¼åŒ–: ${utilResults.formatted}</div>
      <div class="result">é™åˆ¶èŒƒå›´: ${utilResults.clamped}</div>
      <div class="result">éšæœºæ•°: ${utilResults.random}</div>
      <div class="result">æ•°ç»„æ±‚å’Œ: ${utilResults.sum}</div>
    `;

    console.log('========================================');
    console.log('âœ… ES Modules æ¨¡å—åŒ–ç¤ºä¾‹å®Œæˆ');
    console.log('========================================');
  </script>
</body>
</html>
