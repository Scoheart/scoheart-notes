<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>UMD æ¨¡å—åŒ–ç¤ºä¾‹ - AMD ç¯å¢ƒ</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 800px;
      margin: 50px auto;
      padding: 20px;
      background-color: #f5f5f5;
    }
    .container {
      background: white;
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    h1 {
      color: #333;
      border-bottom: 3px solid #673AB7;
      padding-bottom: 10px;
    }
    .section {
      margin: 20px 0;
      padding: 15px;
      background: #f9f9f9;
      border-left: 4px solid #673AB7;
    }
    .result {
      background: #ede7f6;
      padding: 10px;
      margin: 10px 0;
      border-radius: 4px;
      font-family: monospace;
    }
    code {
      background: #f4f4f4;
      padding: 2px 6px;
      border-radius: 3px;
      font-family: 'Courier New', monospace;
    }
    .env-badge {
      display: inline-block;
      background: #673AB7;
      color: white;
      padding: 5px 15px;
      border-radius: 20px;
      font-weight: bold;
      margin: 10px 0;
    }
    .loading {
      color: #673AB7;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ¯ UMD æ¨¡å—åŒ–ç¤ºä¾‹</h1>
    <div class="env-badge">AMD ç¯å¢ƒ (RequireJS)</div>

    <div class="section">
      <h2>ğŸ“ è¯´æ˜</h2>
      <p>æœ¬ç¤ºä¾‹å±•ç¤ºäº† UMD æ¨¡å—åœ¨ <strong>AMD (RequireJS)</strong> ç¯å¢ƒä¸‹çš„ä½¿ç”¨æ–¹å¼ã€‚</p>
      <p>åŒä¸€ä»½ UMD ä»£ç ï¼Œåœ¨æ£€æµ‹åˆ° RequireJS åè‡ªåŠ¨é€‚é…ä¸º AMD æ¨¡å—ã€‚</p>
      <p>æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°æŸ¥çœ‹è¯¦ç»†è¾“å‡ºã€‚</p>
    </div>

    <div class="section">
      <h2>ğŸ§® è®¡ç®—å™¨æ¨¡å—æµ‹è¯•</h2>
      <div id="calculator-results" class="loading">åŠ è½½ä¸­...</div>
    </div>

    <div class="section">
      <h2>ğŸ“Š æ—¥å¿—æ¨¡å—æµ‹è¯•</h2>
      <div id="logger-results" class="loading">åŠ è½½ä¸­...</div>
    </div>

    <div class="section">
      <h2>ğŸ’¡ UMD è‡ªåŠ¨é€‚é…</h2>
      <p>UMD æ¨¡å—æ£€æµ‹åˆ° <code>define.amd</code> å­˜åœ¨ï¼Œè‡ªåŠ¨ä½¿ç”¨ AMD æ–¹å¼å¯¼å‡ºï¼š</p>
      <pre><code>if (typeof define === 'function' && define.amd) {
  // ä½¿ç”¨ AMD æ–¹å¼ â† å½“å‰ç¯å¢ƒ
  define([], factory);
}</code></pre>
    </div>

    <div class="section">
      <h2>ğŸŒŸ ä¸€ä»½ä»£ç ï¼Œä¸‰ç§ç¯å¢ƒ</h2>
      <ul>
        <li>âœ… AMD ç¯å¢ƒ (RequireJS) <strong>â† å½“å‰</strong></li>
        <li>âœ… CommonJS ç¯å¢ƒ (Node.js) - è§ test-commonjs.js</li>
        <li>âœ… æµè§ˆå™¨å…¨å±€å˜é‡ - è§ test-browser.html</li>
      </ul>
    </div>
  </div>

  <!-- åŠ è½½ RequireJS -->
  <script src="https://cdn.jsdelivr.net/npm/requirejs@2.3.6/require.js"></script>
  <script>
    // ä½¿ç”¨ RequireJS åŠ è½½ UMD æ¨¡å—
    require(['calculator', 'logger'], function(Calculator, Logger) {
      console.log('========================================');
      console.log('UMD æ¨¡å—åŒ–ç¤ºä¾‹ - AMD ç¯å¢ƒ (RequireJS)');
      console.log('========================================\n');

      console.log('ğŸ“¦ æ¨¡å—åŠ è½½å®Œæˆ (AMD æ–¹å¼)');
      console.log('âœ… Calculator æ¨¡å—å·²é€šè¿‡ RequireJS åŠ è½½');
      console.log('âœ… Logger æ¨¡å—å·²é€šè¿‡ RequireJS åŠ è½½');
      console.log('');

      // ==================== æµ‹è¯•æ—¥å¿—æ¨¡å— ====================
      console.log('ğŸ“Š æµ‹è¯•æ—¥å¿—æ¨¡å—:');
      Logger.info('åº”ç”¨å¯åŠ¨ (AMD ç¯å¢ƒ)');
      Logger.warn('è¿™æ˜¯ä¸€ä¸ªè­¦å‘Šä¿¡æ¯');
      Logger.error('è¿™æ˜¯ä¸€ä¸ªé”™è¯¯ä¿¡æ¯');
      Logger.debug('è¿™æ˜¯ä¸€ä¸ªè°ƒè¯•ä¿¡æ¯');
      console.log('æ—¥å¿—æ€»æ•°:', Logger.getLogCount());
      console.log('');

      // ==================== æµ‹è¯•è®¡ç®—å™¨æ¨¡å— ====================
      console.log('ğŸ§® æµ‹è¯•è®¡ç®—å™¨æ¨¡å—:');
      Logger.info('å¼€å§‹è®¡ç®—å™¨æµ‹è¯•');

      const result1 = Calculator.add(10, 5);
      console.log('10 + 5 =', result1);
      Logger.info('åŠ æ³•è¿ç®—: 10 + 5 = ' + result1);

      const result2 = Calculator.subtract(20, 8);
      console.log('20 - 8 =', result2);
      Logger.info('å‡æ³•è¿ç®—: 20 - 8 = ' + result2);

      const result3 = Calculator.multiply(6, 7);
      console.log('6 * 7 =', result3);
      Logger.info('ä¹˜æ³•è¿ç®—: 6 * 7 = ' + result3);

      const result4 = Calculator.divide(100, 4);
      console.log('100 / 4 =', result4);
      Logger.info('é™¤æ³•è¿ç®—: 100 / 4 = ' + result4);

      const result5 = Calculator.power(2, 10);
      console.log('2 ^ 10 =', result5);
      Logger.info('å¹‚è¿ç®—: 2 ^ 10 = ' + result5);

      const result6 = Calculator.sqrt(16);
      console.log('âˆš16 =', result6);
      Logger.info('å¹³æ–¹æ ¹: âˆš16 = ' + result6);

      const result7 = Calculator.mod(17, 5);
      console.log('17 % 5 =', result7);
      Logger.info('å–æ¨¡è¿ç®—: 17 % 5 = ' + result7);

      console.log('');
      console.log('ğŸ“œ è®¡ç®—å™¨ç‰ˆæœ¬:', Calculator.getVersion());
      console.log('ğŸ“œ è®¡ç®—å†å²:');
      console.table(Calculator.getHistory());

      // ==================== æµ‹è¯•é”™è¯¯å¤„ç† ====================
      console.log('âš ï¸ æµ‹è¯•é”™è¯¯å¤„ç†:');
      try {
        Calculator.divide(10, 0);
      } catch (e) {
        console.error('æ•è·åˆ°é”™è¯¯:', e.message);
        Logger.error('é™¤é›¶é”™è¯¯: ' + e.message);
      }

      try {
        Calculator.sqrt(-1);
      } catch (e) {
        console.error('æ•è·åˆ°é”™è¯¯:', e.message);
        Logger.error('è´Ÿæ•°å¼€æ–¹é”™è¯¯: ' + e.message);
      }

      // ==================== æŸ¥çœ‹æ‰€æœ‰æ—¥å¿— ====================
      console.log('');
      console.log('ğŸ“Š æ‰€æœ‰æ—¥å¿—è®°å½•:');
      console.table(Logger.getLogs());

      console.log('');
      console.log('ğŸ“ˆ æ—¥å¿—ç»Ÿè®¡:');
      console.log('  - INFO: ', Logger.getLogsByLevel(Logger.LogLevel.INFO).length, 'æ¡');
      console.log('  - WARN: ', Logger.getLogsByLevel(Logger.LogLevel.WARN).length, 'æ¡');
      console.log('  - ERROR:', Logger.getLogsByLevel(Logger.LogLevel.ERROR).length, 'æ¡');
      console.log('  - DEBUG:', Logger.getLogsByLevel(Logger.LogLevel.DEBUG).length, 'æ¡');

      // ==================== UMD ç‰¹æ€§è¯´æ˜ ====================
      console.log('');
      console.log('ğŸ’¡ UMD ç‰¹æ€§:');
      console.log('  âœ… å½“å‰ç¯å¢ƒ: AMD (RequireJS)');
      console.log('  âœ… åŒä¸€ä»½ UMD ä»£ç è‡ªåŠ¨é€‚é…');
      console.log('  âœ… æ£€æµ‹åˆ° define.amdï¼Œä½¿ç”¨ AMD å¯¼å‡º');
      console.log('  âœ… æ— éœ€ä¿®æ”¹ä»£ç ï¼Œè‡ªåŠ¨å…¼å®¹å¤šç¯å¢ƒ');

      // ==================== æ›´æ–°é¡µé¢æ˜¾ç¤º ====================
      document.getElementById('calculator-results').innerHTML = `
        <div class="result">åŠ æ³•: 10 + 5 = ${result1}</div>
        <div class="result">å‡æ³•: 20 - 8 = ${result2}</div>
        <div class="result">ä¹˜æ³•: 6 * 7 = ${result3}</div>
        <div class="result">é™¤æ³•: 100 / 4 = ${result4}</div>
        <div class="result">å¹‚è¿ç®—: 2 ^ 10 = ${result5}</div>
        <div class="result">å¹³æ–¹æ ¹: âˆš16 = ${result6}</div>
        <div class="result">å–æ¨¡: 17 % 5 = ${result7}</div>
        <div class="result">ç‰ˆæœ¬: ${Calculator.getVersion()}</div>
      `;

      document.getElementById('logger-results').innerHTML = `
        <div class="result">æ—¥å¿—æ€»æ•°: ${Logger.getLogCount()}</div>
        <div class="result">INFO æ—¥å¿—æ•°: ${Logger.getLogsByLevel(Logger.LogLevel.INFO).length}</div>
        <div class="result">WARN æ—¥å¿—æ•°: ${Logger.getLogsByLevel(Logger.LogLevel.WARN).length}</div>
        <div class="result">ERROR æ—¥å¿—æ•°: ${Logger.getLogsByLevel(Logger.LogLevel.ERROR).length}</div>
        <div class="result">DEBUG æ—¥å¿—æ•°: ${Logger.getLogsByLevel(Logger.LogLevel.DEBUG).length}</div>
      `;

      console.log('');
      console.log('========================================');
      console.log('âœ… UMD æ¨¡å—åŒ–ç¤ºä¾‹å®Œæˆ (AMD ç¯å¢ƒ)');
      console.log('========================================');
    });
  </script>
</body>
</html>
